#! /bin/sh
# $Id: distrib,v 8.27 2011/12/03 03:23:41 zy Exp $

# Build include files.
f=../cl/extern.h
echo "Building $f"
rm -f $f
sed -n "s/^ \* PUBLIC: \(.*\)/\1/p" ../cl/*.c > $f
chmod 444 $f

f=../common/extern.h
echo "Building $f"
rm -f $f
sed -n "s/^ \* PUBLIC: \(.*\)/\1/p" ../common/*.c > $f
chmod 444 $f

f=../ex/ex_def.h
echo "Building $f"
rm -f $f
awk -f ../ex/ex.awk ../ex/ex_cmd.c > $f
chmod 444 $f

f=../ex/extern.h
echo "Building $f"
rm -f $f
sed -n "s/^ \* PUBLIC: \(.*\)/\1/p" ../ex/*.c > $f
chmod 444 $f

f=../ex/version.h
echo "Building $f"
rm -f $f
sed -n 's/^.*version \([^)]*)\).*/#define VI_VERSION "nvi-\1"/p' \
	../README > $f
chmod 444 $f

f=../common/options_def.h
echo "Building $f"
rm -f $f
awk -f ../common/options.awk ../common/options.c > $f
chmod 444 $f

f=../vi/extern.h
echo "Building $f"
rm -f $f
sed -n "s/^ \* PUBLIC: \(.*\)/\1/p" ../vi/*.c > $f
chmod 444 $f
